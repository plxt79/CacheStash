<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Trevane Manifest Generator - free Lua & SteamTools manifest generator for Steam games. Quickly generate and download AppID files for your Steam library.">
    <meta name="author" content="plxt79">
    <title>Trevane: Manifest Generator</title>
    <link rel="icon" type="image/x-icon" href="/icon.ico">
    <link rel="shortcut icon" href="/icon.png">
    <link rel="stylesheet" href="/files/css/manifest.css">
</head>

<body>
    <div id="toast">toast message</div>

    <div class="mobile-block">
        <h2>⚠️ Access Denied</h2>
        <p>This page is only available on desktop.</p>
        <button onclick="home()">Home</button>
    </div>

    <div class="container">
        <header>
            <a href="/" class="logo">Trevane</a>
            <div class="nav-buttons">
                <button onclick="home()">Home</button>
                <button onclick="requestpage()">Request Games</button>
                <button class="discord-btn" onclick="window.open('https://discord.gg/UepE6DMju3', '_blank')">
                    <img src="/discord-logo.png" alt="Discord"
                        style="width:16px; height:16px; margin-right:6px; vertical-align:middle;">
                    Support
                </button>
            </div>
        </header>

        <div class="generator-container">
            <div class="terminal-header">
                <div class="terminal-buttons">
                    <div class="terminal-button red"></div>
                    <div class="terminal-button yellow"></div>
                    <div class="terminal-button green"></div>
                </div>
                <div class="terminal-title">Manifest Generator</div>
            </div>

            <div class="terminal-body">
                <div class="input-group">
                    <input id="AppIDInput" placeholder="AppID / Steam URL" autocomplete="off">
                    <button class="submit-btn" id="genAppID" onclick="generate()">Submit</button>
                </div>

                <div class="file-count">Total Files: <span id="file-count">Loading...</span></div>

                <div class="note-box">
                    <strong>Note:</strong> You need the latest version of <a
                        href="https://steamtools.net/download.html">SteamTools</a> for these files to work.
                    <span class="tooltip">?
                        <span class="tooltip-text">
                            The latest version of SteamTools only requires Lua files to unlock games. Manifest files are
                            no longer provided by Trevane as they're no longer needed with current SteamTools versions.
                            Games will be automatically updated so you don't need to request updates now. Simply drag
                            the Lua file to your SteamTools icon to unlock the game.
                        </span>
                    </span>
                </div>

                <p class="info-text">Not affiliated with Valve or Steam</p>
            </div>
        </div>
    </div>

    <div id="user-ip" style="position: fixed; bottom: 10px; left: 10px; font-size: 0.8rem; color: #aaa;">Your IP:
        Unknown</div>

    <div class="policy-links">
        <a href="javascript:void(0)" onclick="openPolicy('privacy')">Privacy Policy</a>
        <a href="javascript:void(0)" onclick="openPolicy('terms')">Terms of Service</a>
    </div>

    <div id="policyModal">
        <div>
            <button onclick="closePolicy()" id="closePolicy">✖</button>
            <div id="policyContent"></div>
        </div>
    </div>

    <script>
        const privacyText = `
            <h2>Privacy Policy</h2>
            <p>Last Updated: 2025-10-01</p>
            <p>Trevane ("we," "our," "us") respects your privacy. This Privacy Policy explains what data we collect, how we use it, and your rights when using our services.</p>
            <ul>
                <li><strong>Data We Collect:</strong> AppID submissions, IP addresses for Discord notifications.</li>
                <li><strong>Usage:</strong> Requests prioritization, file existence checks, error logging.</li>
                <li><strong>Data Retention:</strong> Temporary storage in Discord notifications only.</li>
                <li><strong>Your Rights:</strong> Stop using services anytime, request removal from Discord logs.</li>
            </ul>
        `;

        const termsText = `
            <h2>Terms of Service</h2>
            <p>Last Updated: 2025-10-01</p>
            <ul>
                <li>Trevane provides free access to its Manifest & Lua generator.</li>
                <li>Do not abuse or redistribute our files without permission.</li>
                <li>Files are provided "as-is." We are not responsible for damages or misuse.</li>
                <li>Use is limited to personal, non-commercial purposes unless otherwise authorized.</li>
                <li>We may update these terms at any time. Continued use constitutes acceptance.</li>
            </ul>
        `;

        function openPolicy(type) {
            const modal = document.getElementById('policyModal');
            const content = document.getElementById('policyContent');

            content.innerHTML = type === 'privacy' ? privacyText : termsText;

            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('active');
            }, 10);
        }

        function closePolicy() {
            const modal = document.getElementById('policyModal');

            modal.classList.remove('active');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 400);
        }

        document.getElementById('policyModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closePolicy();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                closePolicy();
            }
        });
    </script>

    <script>
        let userIP = "Unknown";

        async function fetchIP() {
            try {
                const res = await fetch("https://api.ipify.org?format=json");
                const data = await res.json();
                userIP = data.ip;
                document.getElementById("user-ip").textContent = `Your IP: ${userIP}`;
            } catch {
                document.getElementById("user-ip").textContent = `Your IP: Unknown`;
            }
        }
        fetchIP();
    </script>

    <script src="/files/js/manifest.js"></script>
</body>

</html>